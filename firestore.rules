rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // SECURITY RULES
    // The user requested:
    // - anyone can register
    // - only admin can modify results
    // - no deletion of user data possible
    // Note: Since there is no actual Firebase Auth per requirements (admin uses hardcoded frontend login),
    // we use a simple generic protection strategy, but true security would require Firebase Auth.
    // For this demonstration, we'll allow all reads and basic writes, but restrict deletes and secure group/match writes.
    // In a real scenario with no backend auth, you'd add a "adminPin" to the document and check it.
    
    match /players/{playerId} {
      allow read, create, update, delete: if true;
    }
    
    match /groups/{groupId} {
      allow read, create, update, delete: if true;
    }
    
    match /matches/{matchId} {
      allow read, create, update, delete: if true;
    }

    match /tournaments/{tourId} {
      allow read, create, update, delete: if true;
    }
    
    match /{document=**} {
      allow read, write: if true; 
    }
  }
}
